# ğŸ¯ å–®ä¸€ Vercel é …ç›®éƒ¨ç½²æ–¹æ¡ˆ

## ğŸ’¡ å•é¡Œ

ä½ æƒ³è¦å°‡ `home` å’Œ `restaurant-ratings` å…©å€‹æ‡‰ç”¨éƒ¨ç½²åœ¨åŒä¸€å€‹ Vercel é …ç›®ä¸­ï¼Œä½¿ç”¨åŒä¸€å€‹åŸŸåã€‚

## âš ï¸ é™åˆ¶

**é‡è¦**ï¼šVercel ä¸€å€‹é …ç›®åªèƒ½éƒ¨ç½²ä¸€å€‹ Next.js æ‡‰ç”¨ã€‚å…©å€‹ç¨ç«‹çš„ Next.js æ‡‰ç”¨ç„¡æ³•ç›´æ¥éƒ¨ç½²åœ¨åŒä¸€å€‹ Vercel é …ç›®ä¸­ã€‚

## âœ… è§£æ±ºæ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: å°‡ Restaurant Ratings æ•´åˆåˆ° Home æ‡‰ç”¨ä¸­ï¼ˆæ¨è–¦ï¼‰

é€™æ˜¯**å”¯ä¸€çœŸæ­£å¯¦ç¾å–®ä¸€åŸŸå**çš„æ–¹å¼ã€‚

#### æ­¥é©Ÿ

1. **å°‡ Restaurant Ratings ä½œç‚º Home çš„å­è·¯ç”±**
   - å°‡ `apps/restaurant-ratings/src/app` çš„å…§å®¹è¤‡è£½åˆ° `apps/home/src/app/ratings`
   - æ›´æ–°æ‰€æœ‰å°å…¥è·¯å¾‘ï¼ˆå¾ `@/` æ”¹ç‚ºç›¸å°è·¯å¾‘æˆ–ä¿æŒä¸è®Šï¼‰
   - ç¢ºä¿å…±äº«åŒ… `@ichen-app/shared-ratings` å’Œ `@ichen-app/shared-supabase` å¯ä»¥æ­£å¸¸ä½¿ç”¨

2. **æ›´æ–° Home æ‡‰ç”¨çš„ package.json**
   ```json
   {
     "dependencies": {
       "@ichen-app/shared-ratings": "workspace:*",
       "@ichen-app/shared-supabase": "workspace:*",
       "@supabase/ssr": "^0.7.0",
       "@supabase/supabase-js": "^2.80.0",
       // ... å…¶ä»– restaurant-ratings éœ€è¦çš„ä¾è³´
     }
   }
   ```

3. **éƒ¨ç½²å–®ä¸€æ‡‰ç”¨**
   - Root Directory: `apps/home`
   - Build Command: `pnpm build`
   - Install Command: `cd ../.. && pnpm install`

4. **è¨­å®šç’°å¢ƒè®Šæ•¸**
   ```
   NEXT_PUBLIC_SUPABASE_URL=...
   NEXT_PUBLIC_SUPABASE_ANON_KEY=...
   ```

#### å„ªé»
- âœ… çœŸæ­£çš„å–®ä¸€åŸŸå
- âœ… å–®ä¸€éƒ¨ç½²ï¼Œç®¡ç†ç°¡å–®
- âœ… ä¸éœ€è¦ rewrites
- âœ… URL çµæ§‹æ¸…æ™°ï¼š`/` æ˜¯é¦–é ï¼Œ`/ratings` æ˜¯è©•åˆ†ç³»çµ±

#### ç¼ºé»
- âš ï¸ éœ€è¦æ•´åˆä»£ç¢¼ï¼ˆä½†ç”±æ–¼å…±äº« packagesï¼Œæ•´åˆç›¸å°ç°¡å–®ï¼‰

---

### æ–¹æ¡ˆ 2: ä½¿ç”¨å…©å€‹ Vercel é …ç›® + Rewritesï¼ˆç•¶å‰å¯¦ç¾ï¼‰

é€™å€‹æ–¹æ¡ˆ**çœ‹èµ·ä¾†**åƒå–®ä¸€åŸŸåï¼Œä½†å¯¦éš›ä¸Šé‚„æ˜¯å…©å€‹éƒ¨ç½²ã€‚

#### ç•¶å‰å¯¦ç¾

1. **Home æ‡‰ç”¨**ï¼š
   - ä½¿ç”¨ `/ratings` ä½œç‚ºç›¸å°è·¯å¾‘
   - é…ç½®äº† `next.config.ts` ä¸­çš„ rewrites
   - éœ€è¦è¨­å®š `NEXT_PUBLIC_RESTAURANT_RATINGS_URL` ç’°å¢ƒè®Šæ•¸

2. **Restaurant Ratings æ‡‰ç”¨**ï¼š
   - ä½¿ç”¨ `/` ä½œç‚ºç›¸å°è·¯å¾‘è¿”å›é¦–é 
   - éœ€è¦è¨­å®š `NEXT_PUBLIC_HOME_URL` ç’°å¢ƒè®Šæ•¸

#### å·¥ä½œåŸç†

- ç”¨æˆ¶è¨ªå• `https://home-app.vercel.app/ratings`
- Next.js rewrites å°‡è«‹æ±‚é‡å¯«åˆ° `https://ratings-app.vercel.app/`
- ç”¨æˆ¶çœ‹åˆ°çš„ URL ä»ç„¶æ˜¯ `/ratings`ï¼ˆä½†å¯¦éš›è«‹æ±‚ç™¼é€åˆ°å¦ä¸€å€‹æ‡‰ç”¨ï¼‰

#### å„ªé»
- âœ… ä¸éœ€è¦æ•´åˆä»£ç¢¼
- âœ… å…©å€‹æ‡‰ç”¨ç¨ç«‹ç®¡ç†

#### ç¼ºé»
- âš ï¸ ä»ç„¶æ˜¯å…©å€‹éƒ¨ç½²
- âš ï¸ éœ€è¦ç®¡ç†å…©å€‹ Vercel é …ç›®
- âš ï¸ å…©å€‹æ‡‰ç”¨çš„ç’°å¢ƒè®Šæ•¸éœ€è¦åˆ†åˆ¥è¨­å®š
- âš ï¸ ç”¨æˆ¶é«”é©—å¯èƒ½ä¸å¦‚çœŸæ­£çš„å–®ä¸€æ‡‰ç”¨ï¼ˆä¾‹å¦‚ï¼šèªè­‰ç‹€æ…‹å¯èƒ½ä¸åŒæ­¥ï¼‰

---

## ğŸ¯ æ¨è–¦æ–¹æ¡ˆ

**å¼·çƒˆæ¨è–¦æ–¹æ¡ˆ 1**ï¼šå°‡ Restaurant Ratings æ•´åˆåˆ° Home æ‡‰ç”¨ä¸­ã€‚

### ç‚ºä»€éº¼ï¼Ÿ

1. **çœŸæ­£çš„å–®ä¸€åŸŸå**ï¼šç”¨æˆ¶è¨ªå•çš„éƒ½æ˜¯åŒä¸€å€‹ URL
2. **å–®ä¸€éƒ¨ç½²**ï¼šåªéœ€è¦ç®¡ç†ä¸€å€‹ Vercel é …ç›®
3. **æ›´å¥½çš„ç”¨æˆ¶é«”é©—**ï¼šèªè­‰ç‹€æ…‹ã€Cookie ç­‰éƒ½çµ±ä¸€ç®¡ç†
4. **æ›´ç°¡å–®çš„ç¶­è­·**ï¼šä¸éœ€è¦ç®¡ç†å…©å€‹é …ç›®çš„ç’°å¢ƒè®Šæ•¸

### æ•´åˆæ­¥é©Ÿï¼ˆç°¡åŒ–ç‰ˆï¼‰

ç”±æ–¼å…©å€‹æ‡‰ç”¨å·²ç¶“å…±äº« `packages/`ï¼Œæ•´åˆç›¸å°ç°¡å–®ï¼š

1. è¤‡è£½ `apps/restaurant-ratings/src/app` â†’ `apps/home/src/app/ratings`
2. è¤‡è£½ `apps/restaurant-ratings/src/components` â†’ `apps/home/src/components/ratings`
3. è¤‡è£½ `apps/restaurant-ratings/src/lib` â†’ `apps/home/src/lib`
4. è¤‡è£½ `apps/restaurant-ratings/src/middleware.ts` â†’ `apps/home/src/middleware.ts`
5. æ›´æ–° `apps/home/package.json` æ·»åŠ å¿…è¦çš„ä¾è³´
6. æ›´æ–°æ‰€æœ‰å°å…¥è·¯å¾‘

---

## ğŸ“ ç•¶å‰ç‹€æ…‹

ç›®å‰å¯¦ç¾çš„æ˜¯**æ–¹æ¡ˆ 2**ï¼ˆå…©å€‹é …ç›® + rewritesï¼‰ã€‚

å¦‚æœä½ æƒ³è¦çœŸæ­£çš„å–®ä¸€åŸŸåï¼Œå»ºè­°æ¡ç”¨**æ–¹æ¡ˆ 1**ï¼ˆæ•´åˆæ‡‰ç”¨ï¼‰ã€‚

---

## ğŸ”— ç›¸é—œæ–‡æª”

- [éƒ¨ç½²å…©å€‹æ‡‰ç”¨](./DEPLOY_BOTH_APPS.md)
- [å–®ä¸€åŸŸåéƒ¨ç½²](./SINGLE_DOMAIN_DEPLOY.md)
- [Vercel è¨­å®šæª¢æŸ¥æ¸…å–®](./VERCEL_SETTINGS_CHECKLIST.md)

